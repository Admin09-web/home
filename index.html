<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Formulario de Contacto</title>
</head>
<body>
    <h2>Formulario de Contacto</h2>
    <form action="https://hook.us2.make.com/1d60iajvhx2sh1ysruqx42ipuad5qczf" method="post">
        <label for="nombre">Nombre:</label><br>
        <input type="text" id="nombre" name="nombre" required><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" required><br><br>

        <label for="mensaje">Mensaje:</label><br>
        <textarea id="mensaje" name="mensaje" rows="4" required></textarea><br><br>

        <button type="submit">Enviar Mensaje</button>
    </form>

    <script>
    const form = document.getElementById('miFormulario');
    form.addEventListener('submit', async function(e) {
      e.preventDefault();

      const data = {
        nombre: form.nombre.value,
        email: form.email.value,
        mensaje: form.mensaje.value
      };

      try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbw7Oo6NBrdcKOSREH_TTUHugNf138522zg9p4QPL3pbXJA2fOBZIHdqyYDsC0pDLsdH/exec', {
          method: 'POST',
          body: JSON.stringify(data),
          headers: {
            'Content-Type': 'application/json'
          }
        });

        const result = await response.json();
        console.log(result);

        document.getElementById('respuesta').innerText = result.message || "Formulario enviado correctamente.";

        if (result.pdfUrl) {
          const link = document.createElement('a');
          link.href = result.pdfUrl;
          link.innerText = "Ver PDF";
          link.target = "_blank";
          document.getElementById('respuesta').appendChild(document.createElement("br"));
          document.getElementById('respuesta').appendChild(link);
        }

      } catch (err) {
        console.error("Error al enviar:", err);
        document.getElementById('respuesta').innerText = "Hubo un error al enviar el formulario.";
      }
    });
  </script>
</body>
</html>
